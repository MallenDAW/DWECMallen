<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Apartado 6</title>
  </head>
  <body>
    <script>
      /*6.- Trata de organizar el código de tu programa (¿quitando switch?) usando funciones.
            Define y llama a tres funciones en los lugares apropiados:

              • showContact: la función debe tomar dos argumentos; el primero es la lista de contactos y el segundo es el número de índice del contacto a mostrar; 
                             dentro de la función, verifica si se pasan los argumentos correctos, es decir, si los contactos son un array (utiliza la construcción instanceofArray para esto).
              • showAllContacts: la función debe tomar un argumento, la lista de contactos; dentro de la función, verifica si el argumento dado es un array.
              • addNewContact: la función debe tomar cuatro argumentos, una lista de contactos y los datos del nuevo contacto, 
                               es decir: nombre, teléfono y número; antes de agregar un nuevo contacto, verifica si el argumento pasado es un array y si los datos del nuevo contacto tienen algún valor.
    */

      //INICIO FUNCIONES---------
      //Creamos una función para crear contactos nuevos
      function addNewContact(array) {
        let nombre = prompt("Nombre:");
        let telefono = prompt("Telefono:");
        let correo = prompt("Correo:");

        //si algun campo esta vacío, no se agrega el uauario
        if (nombre === "" || telefono === "" || correo === "") {
          alert("No pudo añadrise el contacto, no se admiten campos vacíos.");
        } else {
          //Si los datos son validos se intorduce al array en la última posición
          array.push({
            nombre: nombre,
            telefono: telefono,
            correo: correo,
          });
          alert('Contacto nuevo agregado.');
        }
      }

      //Creamos una función para imprimir, pasandole el array y la posición que queremos que muestre
      function showContact(array, posicion) {
        let ver=`${array[posicion].nombre} / ${array[posicion].telefono} / ${array[posicion].correo}`;
        console.log(ver);
        return ver;
      }

      //Funcion que itera el array para mostrar todo
      function showAllContacts(array) {
        let ver="";
        let index=1; //Agregamos visualmente el indice de cada contacto.
        array.forEach(element => {
          ver+=`${index}- ${element.nombre} / ${element.telefono} / ${element.correo}\n`;
          index++;
        });
        return ver;
      }

      //Funcion para elegir un contacto específico
      function chooseOption(array){
        
        let mensaje=showAllContacts(array)+'\nSelecciona uno: ';
       do{
          opc=parseInt(prompt(mensaje));
        } while(opc<0||opc>array.length);
        return opc-1;
      }
      //...FIN FUNCIONES ----------------

      
      //Definimos el array con la lista de contactos (estos serán objetos)
      let contactos = [
        {
          nombre: "Maxwell",
          telefono: "(0191) 719 6495",
          correo: "correofalso@nonummyac.co.uk",
        },
        {
          nombre: "Raja",
          telefono: "0866 398 2895",
          correo: "correofalso@sed.com",
        },
        {
          nombre: "Helen",
          telefono: "0800 1111",
          correo: "correofalso@sed.com",
        },
      ];

      //Declaramos la variable opcion inicianizándola a cualquier numero EXCEPTO 0
      let opcion=30;

      //Mientras no le de a 0-SALIR seguirá en bucle 
      while (opcion!==0) {
        
      opcion = parseInt(prompt("ELIGE UNA OPCION\n"+
                                "1-Mostrar un contacto\n"+
                                "2-Mostrar todos los contactos\n"+
                                "3-Agragar nuevo contacto\n\n"+
                                "0-SALIR"));

      switch (opcion) {
        case 1:
          // showContact(contactos, chooseOption(contactos));
          alert(showContact(contactos,chooseOption(contactos)));
          break;
        case 2:
          alert(showAllContacts(contactos));
          break;
        case 3:
          addNewContact(contactos);
          break;
        case 0:
          console.log("...saliendo.");
          alert("Has salido correctamente")
        break;
        default:
          alert("OPCIÓN NO VALIDA")
        break;
      }
    }
    </script>
  </body>
</html>
